import {
    Button,
    VerticalBox,
    GroupBox,
    CheckBox,
    ListView,
    HorizontalBox,
    LineEdit,
} from "std-widgets.slint";
import "../font/NotoSansSC-Regular.ttf";

export component AppWindow inherits Window {
    default-font-family: "Noto Sans SC";
    title: "File Cleaner";
    width: 800px;
    height: 600px;

    in-out property <string> selected_directory;
    in-out property <bool> org_enabled;
    in-out property <bool> html_enabled;
    in-out property <bool> dsstore_enabled;
    in-out property <string> action_text;
    in-out property <[string]> scan_results;

    callback choose_dir();
    callback action_clicked();

    // Directory Select Area
    VerticalBox {
        spacing: 20px;
        padding: 20px;
        GroupBox {
            title: "Choose Dir";
            VerticalBox {
                spacing: 10px;
                padding: 6px;

                Text {
                    text: "Target Path: ";
                    font-size: 15px;
                    color: #444;
                }

                HorizontalBox {
                    spacing: 10px;

                    LineEdit {
                        text: selected_directory;
                        read-only: true;
                        horizontal-stretch: 1;
                    }

                    Button {
                        text: "Select...";
                        width: 110px;
                        clicked => {
                            root.choose_dir()
                        }
                    }
                }
            }
        }

        // Scan Results
        GroupBox {
            title: "Scan Results";
            VerticalBox {
                spacing: 8px;
                padding: 6px;
                ListView {
                    for item in scan_results: Rectangle {
                        height: 22px;
                        background: #f7f7f7;
                        border-radius: 4px;
                        Text {
                            text: item;
                            font-size: 13px;
                            vertical-alignment: center;
                        }
                    }
                }
            }
        }

        // Target File Types
        GroupBox {
            title: "Target File Type: ";

            VerticalBox {
                spacing: 10px;
                padding: 6px;

                CheckBox {
                    text: "*.org~";
                    checked: org_enabled;
                    toggled => {
                        root.action_text = "Scan"
                    }
                }

                CheckBox {
                    text: "*.html~";
                    checked: org_enabled;
                    toggled => {
                        root.action_text = "Scan"
                    }
                }

                CheckBox {
                    text: ".DS_Store";
                    checked: org_enabled;
                    toggled => {
                        root.action_text = "Scan"
                    }
                }
            }
        }

        // Action Button
        Button {
            text: action_text;
            height: 48px;
            horizontal-stretch: 1;
            clicked => {
                root.action_clicked()
            }
        }
    }
}
